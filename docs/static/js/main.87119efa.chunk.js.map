{"version":3,"sources":["utils/spotify.js","components/Login.js","components/App.js","index.js"],"names":["loginUrl","process","join","Login","env","console","log","test","className","src","alt","href","spotify","SpotifyWebApi","App","useState","token","setToken","getUser","a","window","location","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","_token","access_token","setAccessToken","getMe","user","useEffect","ReactDOM","render","document","getElementById"],"mappings":"qQAgBaA,G,YAAQ,UAhBO,yCAgBP,sBAVJC,mCAUI,yBAZD,yBAYC,kBARN,CACb,8BACA,4BACA,2BACA,gBACA,8BAGwGC,KACxG,OADmB,0CCCNC,EAbD,WACZ,IACMC,EAAMH,2LAGZ,OAFAI,QAAQC,IAAI,CAAEF,QACdC,QAAQC,IAAI,CAAEC,KAHDN,qCAKX,sBAAKO,UAAU,QAAf,UACE,qBAAKC,IDTT,0ECS8BC,IAAI,iBAC9B,mBAAGC,KAAMX,EAAT,oC,OCPAY,EAAU,I,OAAIC,GAyBLC,EAvBH,WAAO,IAAD,EACUC,mBAAS,MADnB,mBACTC,EADS,KACFC,EADE,KAGVC,EAAO,uCAAG,gCAAAC,EAAA,2DFWTC,OAAOC,SAASC,KACpBC,UAAU,GACVC,MAAM,KACNC,QAAO,SAACC,EAASC,GAChB,IAAIC,EAAQD,EAAKH,MAAM,KAGvB,OAFAE,EAAQE,EAAM,IAAMC,mBAAmBD,EAAM,IAEtCF,IACN,IElBmBI,EADR,EACNC,aACRX,OAAOC,SAASC,KAAO,IAEnBQ,EAJU,uBAKZb,EAASa,GACTlB,EAAQoB,eAAeF,GANX,SAOOlB,EAAQqB,QAPf,OAONC,EAPM,OAQZ7B,QAAQC,IAAI,CAAE4B,SARF,2CAAH,qDAeb,OAHAC,qBAAU,WACRjB,MACC,IAED,qBAAKV,UAAU,MAAf,SAAsBQ,EAAQ,iDAA4B,cAAC,EAAD,OCrB9DoB,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.87119efa.chunk.js","sourcesContent":["export const authEndpoint = 'https://accounts.spotify.com/authorize';\r\nexport const spotifyLogoUrl =\r\n  'https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg';\r\n\r\nconst redirectUri = 'http://localhost:3000/';\r\n\r\nconst clientId = process.env.REACT_APP_CLIENT_ID;\r\n\r\nconst scopes = [\r\n  'user-read-currently-playing',\r\n  'user-read-recently-played',\r\n  'user-read-playback-state',\r\n  'user-top-read',\r\n  'user-modify-playback-state'\r\n];\r\n\r\nexport const loginUrl = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n  '%20'\r\n)}&response_type=token&show_dialog=true`;\r\n\r\nexport const getTokenFromResponse = () => {\r\n  return window.location.hash\r\n    .substring(1)\r\n    .split('&')\r\n    .reduce((initial, item) => {\r\n      var parts = item.split('=');\r\n      initial[parts[0]] = decodeURIComponent(parts[1]);\r\n\r\n      return initial;\r\n    }, {});\r\n};\r\n","import React from 'react';\r\nimport '../stylesheets/login.scss';\r\nimport { loginUrl, spotifyLogoUrl } from '../utils/spotify';\r\n\r\nconst Login = () => {\r\n  const test = process.env.REACT_APP_CLIENT_ID;\r\n  const env = process.env;\r\n  console.log({ env });\r\n  console.log({ test });\r\n  return (\r\n    <div className='login'>\r\n      <img src={spotifyLogoUrl} alt='spotify-logo' />\r\n      <a href={loginUrl}>login with spotify</a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useEffect, useState } from 'react';\r\nimport '../stylesheets/app.scss';\r\nimport Login from './Login';\r\nimport { getTokenFromResponse } from '../utils/spotify';\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nconst spotify = new SpotifyWebApi();\r\n\r\nconst App = () => {\r\n  const [token, setToken] = useState(null);\r\n\r\n  const getUser = async () => {\r\n    const { access_token: _token } = getTokenFromResponse();\r\n    window.location.hash = '';\r\n\r\n    if (_token) {\r\n      setToken(_token);\r\n      spotify.setAccessToken(_token);\r\n      const user = await spotify.getMe();\r\n      console.log({ user });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []);\r\n  return (\r\n    <div className='app'>{token ? <div> estoy logado </div> : <Login />}</div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}